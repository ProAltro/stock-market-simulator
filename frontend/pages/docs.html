<div x-show="currentPage === 'api'" class="page docs-page">
  <header class="page-header">
    <h1>Algorithm API Documentation</h1>
    <p class="page-subtitle">
      Reference for creating commodity trading algorithms
    </p>
    <a
      href="/docs/"
      target="_blank"
      class="btn btn-primary"
      style="margin-top: 0.5rem; display: inline-block; text-decoration: none"
    >
      Full Platform Documentation
    </a>
  </header>

  <div class="docs-content card">
    <h2>Overview</h2>
    <p>
      Your algorithm runs on 1 million ticks of commodity market data. You start
      with $100,000 cash.
    </p>

    <h2>Commodities</h2>
    <ul>
      <li><strong>OIL</strong> - Crude Oil (Energy)</li>
      <li><strong>STEEL</strong> - Steel (Construction)</li>
      <li><strong>WOOD</strong> - Lumber (Construction)</li>
      <li><strong>BRICK</strong> - Brick (Construction)</li>
      <li><strong>GRAIN</strong> - Grain (Agriculture)</li>
    </ul>

    <h2>Data Access Functions</h2>

    <div class="api-function">
      <code>get_commodities()</code>
      <p>
        Returns list of commodity symbols:
        <code>['OIL', 'STEEL', 'WOOD', 'BRICK', 'GRAIN']</code>
      </p>
    </div>

    <div class="api-function">
      <code>get_tick_count()</code>
      <p>Returns total number of ticks: <code>1000000</code></p>
    </div>

    <div class="api-function">
      <code>get_current_tick()</code>
      <p>Returns the current tick being processed (0 to 999999)</p>
    </div>

    <div class="api-function">
      <code>get_ohlcv(symbol, start_tick=None, end_tick=None)</code>
      <p>Get tick-level OHLCV data for a commodity. Returns list of dicts with keys: <code>tick</code>, <code>open</code>, <code>high</code>, <code>low</code>, <code>close</code>, <code>volume</code></p>
    </div>

    <div class="api-function">
      <code>get_orderbook(symbol, tick)</code>
      <p>
        Get anonymized orderbook at a specific tick. Returns
        <code>{bids: [{price, quantity}], asks: [{price, quantity}]}</code>
      </p>
    </div>

    <div class="api-function">
      <code>get_news(tick)</code>
      <p>
        Get news events at a specific tick. Returns list of dicts with keys: <code>symbol</code>, <code>category</code>, <code>sentiment</code>, <code>magnitude</code>, <code>headline</code>
      </p>
    </div>

    <h2>Price Functions</h2>

    <div class="api-function">
      <code>get_price(symbol, tick=None)</code>
      <p>
        Get price for a commodity. If tick is None, returns current tick's
        price.
      </p>
    </div>

    <h2>Account & Position Functions</h2>

    <div class="api-function">
      <code>get_cash()</code>
      <p>Get current cash balance.</p>
    </div>

    <div class="api-function">
      <code>get_positions()</code>
      <p>Get dict of all positions: <code>{symbol: quantity}</code></p>
    </div>

    <div class="api-function">
      <code>get_position(symbol)</code>
      <p>Get quantity held for a specific commodity. Returns 0 if none.</p>
    </div>

    <h2>Trading Functions</h2>

    <div class="api-function">
      <code>buy(symbol, quantity)</code>
      <p>
        Buy commodity at market price. Returns <code>True</code> if successful,
        <code>False</code> if insufficient cash.
      </p>
    </div>

    <div class="api-function">
      <code>sell(symbol, quantity)</code>
      <p>
        Sell commodity at market price. Returns <code>True</code> if successful,
        <code>False</code> if insufficient position.
      </p>
    </div>

    <h2>Example Strategy (Python)</h2>
    <pre class="code-example">
# Simple momentum strategy
def run():
    symbol = 'OIL'
    lookback = 100
    
    for tick in range(get_tick_count()):
        # Skip first lookback ticks
        if tick < lookback:
            continue
            
        # Get recent prices
        prices = [get_price(symbol, t) for t in range(tick - lookback, tick)]
        avg_price = sum(prices) / len(prices)
        current_price = prices[-1]
        
        position = get_position(symbol)
        
        # Buy if price above average and we have cash
        if current_price > avg_price * 1.02 and position == 0:
            qty = int(get_cash() / current_price)
            if qty > 0:
                buy(symbol, qty)
        
        # Sell if price below average and we have position
        elif current_price < avg_price * 0.98 and position > 0:
            sell(symbol, position)

run()
    </pre>

    <h2>Scoring</h2>
    <p>Your Final Net Worth = Cash Balance + Σ(Position × Final Price)</p>
    <p>Leaderboard rankings are based on Final Net Worth after all 1M ticks.</p>
  </div>
</div>
